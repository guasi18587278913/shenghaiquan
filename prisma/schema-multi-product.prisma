// 多产品架构的数据库设计建议

model Community {
  id          String   @id @default(cuid())
  name        String   // 海外AI产品
  slug        String   @unique // ai-overseas
  icon        String?  // 产品图标
  description String?
  memberCount Int      @default(0)
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  
  // 关系
  courses     Course[]
  posts       Post[]
  events      Event[]
  enrollments Enrollment[]
  members     CommunityMember[]
}

model CommunityMember {
  id          String    @id @default(cuid())
  userId      String
  communityId String
  joinedAt    DateTime  @default(now())
  role        String    @default("MEMBER") // MEMBER, MODERATOR, ADMIN
  
  user        User      @relation(fields: [userId], references: [id])
  community   Community @relation(fields: [communityId], references: [id])
  
  @@unique([userId, communityId])
}

// 修改现有模型，添加 communityId
model Course {
  id          String    @id @default(cuid())
  communityId String    // 新增：属于哪个产品
  title       String
  // ... 其他字段
  
  community   Community @relation(fields: [communityId], references: [id])
}

model Post {
  id          String    @id @default(cuid())
  communityId String    // 新增：属于哪个产品
  // ... 其他字段
  
  community   Community @relation(fields: [communityId], references: [id])
}