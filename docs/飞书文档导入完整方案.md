# 飞书文档导入完整方案

## 一、需求分析

根据你的需求，我们需要实现：
1. **图文混合内容**：支持文字和图片在同一内容中混合显示
2. **视频嵌入**：使用腾讯云VOD存储和播放视频
3. **Coursera风格UI**：左侧课程大纲，右侧内容展示
4. **从飞书文档导入**：支持复制粘贴导入

## 二、技术方案

### 1. 腾讯云VOD视频方案

**优势**：
- 专业的视频存储和分发
- 支持转码、加密、防盗链
- 提供播放器SDK
- 按需付费，成本可控

**实施步骤**：
```bash
# 1. 开通腾讯云VOD服务
# 2. 获取 SecretId 和 SecretKey
# 3. 安装SDK
npm install vod-node-sdk
```

### 2. 富文本编辑器方案

使用 **TipTap** 编辑器，支持：
- 图文混合编辑
- 拖拽上传图片
- 视频嵌入
- Markdown导入导出
- 所见即所得

### 3. UI设计方案（Coursera风格）

**页面结构**：
```
┌─────────────────────────────────────────┐
│          课程标题栏                      │
├─────────────────┬───────────────────────┤
│                 │                       │
│  课程大纲       │    内容展示区         │
│  (固定侧边栏)   │    (视频/图文)        │
│                 │                       │
│  ▼ 基础篇       │    [视频播放器]       │
│    1.1 玩起来   │                       │
│    1.2 随便写   │    课程内容...        │
│  ▶ 进阶篇       │    [图片]             │
│                 │    更多内容...        │
│                 │                       │
└─────────────────┴───────────────────────┘
```

## 三、导入工作流程

### 方式一：半自动导入（推荐）

1. **准备阶段**：
   - 在飞书文档中整理好章节结构
   - 将视频上传到腾讯云VOD
   - 获取视频的FileId

2. **导入步骤**：
   ```
   步骤1: 复制飞书文档内容
   步骤2: 在导入页面粘贴
   步骤3: 系统自动识别图片并上传
   步骤4: 手动关联视频FileId
   步骤5: 预览并确认导入
   ```

### 方式二：结构化导入

准备JSON文件，格式如下：
```json
{
  "sectionTitle": "基础篇",
  "sectionSlug": "basics",
  "sectionDescription": "AI编程基础知识",
  "lessons": [
    {
      "title": "1.1 玩起来！通过AI，10分钟发布你的第一款网站产品！",
      "type": "VIDEO_TEXT",
      "content": "## 课程介绍\n\n哈喽，大家好！我是刘小排，欢迎来到我的 Idea to Business 课程！\n\n![课程截图](自动上传后的URL)\n\n现在你看到的是本课程的第一集...",
      "videoFileId": "387xxxxx",  // 腾讯云VOD的FileId
      "duration": 600,  // 视频时长（秒）
      "isFree": true
    }
  ]
}
```

## 四、实施步骤

### 第一步：配置腾讯云VOD

1. 登录腾讯云控制台
2. 开通云点播服务
3. 创建应用，获取配置信息
4. 在项目中配置：

```env
# .env.local
VOD_SECRET_ID=your-secret-id
VOD_SECRET_KEY=your-secret-key
VOD_REGION=ap-guangzhou
```

### 第二步：创建视频上传功能

1. 客户端获取上传签名
2. 使用VOD SDK上传视频
3. 获取FileId保存到数据库
4. 使用腾讯云播放器播放

### 第三步：实现富文本编辑器

1. 支持粘贴飞书文档内容
2. 自动识别并上传图片
3. 保持原有格式
4. 支持预览

### 第四步：Coursera风格UI

1. 左侧固定课程大纲
2. 右侧内容自适应
3. 视频置顶显示
4. 图文内容优雅排版

## 五、操作流程示例

以你的"1.1 玩起来"课程为例：

1. **准备视频**：
   - 将视频上传到腾讯云VOD
   - 记录FileId：387702307629xxx

2. **准备内容**：
   - 从飞书复制课程内容
   - 包含文字、图片、列表等

3. **导入操作**：
   - 访问导入页面
   - 粘贴内容到编辑器
   - 关联视频FileId
   - 设置免费试看
   - 点击导入

4. **效果预览**：
   - 左侧显示课程大纲
   - 右侧视频自动播放
   - 下方显示图文内容
   - 支持进度跟踪

## 六、成本估算

**腾讯云VOD费用**（月）：
- 存储：0.0048元/GB/日
- 流量：0.24元/GB
- 转码：0.065元/分钟

**示例**：100个视频，每个10分钟，1000次播放
- 存储费：约15元/月
- 流量费：约240元/月
- 总计：约255元/月

## 七、最佳实践建议

1. **视频处理**：
   - 统一转码为HLS格式
   - 设置多种清晰度
   - 启用防盗链

2. **内容组织**：
   - 保持章节层级清晰
   - 视频控制在10-15分钟
   - 图片使用CDN加速

3. **用户体验**：
   - 记录学习进度
   - 支持倍速播放
   - 移动端适配

需要我立即开始实现这个方案吗？