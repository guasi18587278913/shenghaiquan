# ğŸš€ ç«‹å³å®æ–½å†…å®¹ä¿æŠ¤ - 3æ­¥æå®š

## ç¬¬1æ­¥ï¼šé…ç½®è…¾è®¯äº‘COSï¼ˆ10åˆ†é’Ÿï¼‰

### 1.1 åˆ›å»ºç§æœ‰å­˜å‚¨æ¡¶
```bash
1. ç™»å½•è…¾è®¯äº‘æ§åˆ¶å°
2. è¿›å…¥"å¯¹è±¡å­˜å‚¨COS"
3. åˆ›å»ºå­˜å‚¨æ¡¶ï¼š
   - åç§°ï¼šdeepsea-private-course
   - åœ°åŸŸï¼šé€‰æ‹©ç¦»æ‚¨æœ€è¿‘çš„
   - è®¿é—®æƒé™ï¼šç§æœ‰è¯»å†™ âš ï¸é‡è¦
```

### 1.2 æ·»åŠ ç¯å¢ƒå˜é‡
åœ¨ `.env.local` æ·»åŠ ï¼š
```env
# ç§æœ‰COSé…ç½®
COS_SECRET_ID=ä½ çš„SecretId
COS_SECRET_KEY=ä½ çš„SecretKey
COS_PRIVATE_BUCKET=deepsea-private-course
COS_REGION=ap-guangzhou
```

## ç¬¬2æ­¥ï¼šæµ‹è¯•å†…å®¹ä¿æŠ¤ï¼ˆ5åˆ†é’Ÿï¼‰

### 2.1 ä¸Šä¼ æµ‹è¯•å†…å®¹
```javascript
// åœ¨è¯¾ç¨‹ç®¡ç†é¡µé¢ä½¿ç”¨
import { uploadPrivateContent } from '@/lib/content-protection';

const file = // æ‚¨çš„æ–‡ä»¶
const key = await uploadPrivateContent(
  file,
  'test-lesson.pdf',
  'course-123'
);
```

### 2.2 åœ¨è¯¾ç¨‹ä¸­æ˜¾ç¤º
```jsx
// è¯¾ç¨‹è¯¦æƒ…é¡µ
{lesson.type === 'protected' && (
  <iframe 
    src={`/api/protected-content/${courseId}/${lesson.contentKey}`}
    className="w-full h-[600px]"
  />
)}
```

## ç¬¬3æ­¥ï¼šè¿ç§»WordPresså†…å®¹ï¼ˆ30åˆ†é’Ÿï¼‰

### 3.1 è¿è¡Œè¿ç§»è„šæœ¬
```bash
# å®‰è£…ä¾èµ–
npm install cos-nodejs-sdk-v5 node-fetch

# è¿è¡Œè¿ç§»
node scripts/migrate-from-wordpress.js
```

### 3.2 æ›´æ–°è¯¾ç¨‹æ•°æ®
å°† WordPress é“¾æ¥æ›¿æ¢ä¸ºä¿æŠ¤é“¾æ¥ï¼š
```javascript
// ä¹‹å‰
wordpressSlug: 'your-lesson'

// ä¹‹å
type: 'protected',
contentKey: 'courses/migrated/your-lesson/content.html'
```

## âœ… å®Œæˆåæ•ˆæœ

1. **ç”¨æˆ·æœªç™»å½•** â†’ çœ‹åˆ°"è¯·å…ˆç™»å½•"
2. **ç”¨æˆ·æœªè´­ä¹°** â†’ çœ‹åˆ°"è¯·å…ˆè´­ä¹°è¯¾ç¨‹"  
3. **å·²è´­ä¹°ç”¨æˆ·** â†’ æ­£å¸¸è®¿é—®å†…å®¹
4. **é“¾æ¥30åˆ†é’Ÿåå¤±æ•ˆ** â†’ éœ€è¦é‡æ–°è·å–

## ğŸ‰ æ­å–œï¼æ‚¨çš„å†…å®¹ç°åœ¨å®‰å…¨äº†

- WordPressçš„å…¬å¼€é“¾æ¥é—®é¢˜è§£å†³äº†
- å†…å®¹å­˜å‚¨åœ¨ç§æœ‰ç©ºé—´
- åªæœ‰ä»˜è´¹ç”¨æˆ·èƒ½è®¿é—®
- å®æ—¶æƒé™éªŒè¯

## ğŸ†˜ é‡åˆ°é—®é¢˜ï¼Ÿ

1. **COSé…ç½®é—®é¢˜**ï¼šæ£€æŸ¥SecretId/Keyæ˜¯å¦æ­£ç¡®
2. **æƒé™éªŒè¯å¤±è´¥**ï¼šç¡®è®¤Enrollmentè¡¨æœ‰æ•°æ®
3. **å†…å®¹æ— æ³•æ˜¾ç¤º**ï¼šæ£€æŸ¥contentKeyè·¯å¾„

éœ€è¦å¸®åŠ©è¯·éšæ—¶å‘Šè¯‰æˆ‘ï¼