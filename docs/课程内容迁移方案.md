# æ·±æµ·åœˆè¯¾ç¨‹å†…å®¹è¿ç§»æ–¹æ¡ˆ

## ğŸ“‹ è¯¾ç¨‹å†…å®¹ç±»å‹æ˜ å°„

### 1. å›¾æ–‡å†…å®¹ï¼ˆåŸWordPressæ–‡ç« ï¼‰
```javascript
// åŸæ¥ï¼šWordPresså…¬å¼€é“¾æ¥
https://wordpress.com/è¿™å¥—è¯¾ç¨‹æœ‰ä»€ä¹ˆä¸åŒ

// è¿ç§»åï¼šç§æœ‰å­˜å‚¨ + æƒé™éªŒè¯
/api/protected-content/preface/lesson1.html
```

### 2. è§†é¢‘å†…å®¹
```javascript
// åŸæ¥ï¼šå¯èƒ½å­˜åœ¨YouTubeæˆ–å…¶ä»–å¹³å°
https://youtube.com/watch?v=xxx

// è¿ç§»åï¼šç§æœ‰COSå­˜å‚¨
/api/protected-content/preface/videos/lesson3-env-setup.mp4
```

### 3. ä½œä¸š/ç»ƒä¹ æ–‡ä»¶
```javascript
// åŸæ¥ï¼šå¯èƒ½æ˜¯å…¬å¼€ä¸‹è½½é“¾æ¥
https://example.com/homework.pdf

// è¿ç§»åï¼šéœ€è¦æƒé™æ‰èƒ½ä¸‹è½½
/api/protected-content/preface/homework/exercise1.pdf
```

## ğŸš€ å®æ–½æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºè¯¾ç¨‹å†…å®¹ç®¡ç†é¡µé¢

åˆ›å»º `/app/admin/courses/content-manager/page.tsx`ï¼š

```typescript
'use client';

import { useState } from 'react';
import { FileText, Video, FileCode, Upload } from 'lucide-react';

export default function CourseContentManager() {
  const [selectedLesson, setSelectedLesson] = useState(null);
  
  const lessons = [
    {
      id: 'lesson1',
      title: 'è¿™å¥—è¯¾ç¨‹æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ',
      type: 'article',
      hasContent: true,
      contentTypes: ['text', 'images']
    },
    {
      id: 'lesson2',
      title: 'å­¦ä¹ è·¯å¾„ä»‹ç»',
      type: 'mixed',
      hasContent: false,
      contentTypes: ['text', 'images', 'pdf']
    },
    {
      id: 'lesson3',
      title: 'å¼€å‘ç¯å¢ƒå‡†å¤‡',
      type: 'video',
      hasContent: false,
      contentTypes: ['video', 'text', 'code']
    }
  ];

  return (
    <div className="max-w-6xl mx-auto p-6">
      <h1 className="text-2xl font-bold mb-6">è¯¾ç¨‹å†…å®¹ç®¡ç†</h1>
      
      <div className="grid grid-cols-3 gap-6">
        {/* è¯¾ç¨‹åˆ—è¡¨ */}
        <div className="bg-white rounded-lg shadow p-4">
          <h2 className="font-semibold mb-4">è¯¾ç¨‹ç« èŠ‚</h2>
          {lessons.map(lesson => (
            <div
              key={lesson.id}
              onClick={() => setSelectedLesson(lesson)}
              className={`p-3 rounded cursor-pointer mb-2 flex items-center justify-between
                ${selectedLesson?.id === lesson.id ? 'bg-blue-50 border-blue-500 border' : 'hover:bg-gray-50'}`}
            >
              <div className="flex items-center gap-2">
                {lesson.type === 'article' && <FileText className="w-4 h-4" />}
                {lesson.type === 'video' && <Video className="w-4 h-4" />}
                {lesson.type === 'mixed' && <FileCode className="w-4 h-4" />}
                <span className="text-sm">{lesson.title}</span>
              </div>
              {lesson.hasContent && (
                <span className="text-xs bg-green-100 text-green-700 px-2 py-1 rounded">å·²ä¸Šä¼ </span>
              )}
            </div>
          ))}
        </div>

        {/* å†…å®¹ä¸Šä¼ åŒº */}
        <div className="col-span-2 bg-white rounded-lg shadow p-6">
          {selectedLesson ? (
            <div>
              <h3 className="font-semibold mb-4">{selectedLesson.title}</h3>
              
              {/* æ ¹æ®è¯¾ç¨‹ç±»å‹æ˜¾ç¤ºä¸åŒçš„ä¸Šä¼ é€‰é¡¹ */}
              <div className="space-y-4">
                {selectedLesson.contentTypes.includes('text') && (
                  <div className="border-2 border-dashed rounded-lg p-4">
                    <h4 className="font-medium mb-2">æ–‡æœ¬å†…å®¹</h4>
                    <button className="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">
                      ä»WordPresså¯¼å…¥
                    </button>
                  </div>
                )}
                
                {selectedLesson.contentTypes.includes('video') && (
                  <div className="border-2 border-dashed rounded-lg p-4">
                    <h4 className="font-medium mb-2">è§†é¢‘å†…å®¹</h4>
                    <input type="file" accept="video/*" className="mb-2" />
                    <p className="text-sm text-gray-500">æ”¯æŒ MP4, MOV ç­‰æ ¼å¼</p>
                  </div>
                )}
                
                {selectedLesson.contentTypes.includes('pdf') && (
                  <div className="border-2 border-dashed rounded-lg p-4">
                    <h4 className="font-medium mb-2">ä½œä¸š/èµ„æ–™</h4>
                    <input type="file" accept=".pdf,.doc,.docx" className="mb-2" />
                    <p className="text-sm text-gray-500">æ”¯æŒ PDF, Word æ–‡æ¡£</p>
                  </div>
                )}
              </div>
            </div>
          ) : (
            <div className="text-center text-gray-500 py-12">
              <Upload className="w-12 h-12 mx-auto mb-4 text-gray-300" />
              <p>é€‰æ‹©ä¸€ä¸ªè¯¾ç¨‹å¼€å§‹ä¸Šä¼ å†…å®¹</p>
            </div>
          )}
        </div>
      </div>
    </div>
  );
}
```

### ç¬¬äºŒæ­¥ï¼šè¿ç§»WordPresså†…å®¹

è¿è¡Œè¿ç§»è„šæœ¬ï¼Œå°†WordPresså†…å®¹è½¬ç§»åˆ°ç§æœ‰å­˜å‚¨ï¼š

```bash
node scripts/migrate-from-wordpress.js
```

### ç¬¬ä¸‰æ­¥ï¼šæ›´æ–°è¯¾ç¨‹æ•°æ®

åœ¨ `/lib/course-data.ts` ä¸­æ›´æ–°è¯¾ç¨‹ä¿¡æ¯ï¼š

```typescript
{
  id: 'preface-1',
  title: 'è¿™å¥—è¯¾ç¨‹æœ‰ä»€ä¹ˆä¸åŒ?',
  slug: 'intro',
  type: 'protected', // æ”¹ä¸ºprotectedç±»å‹
  contentKey: 'courses/preface/lesson1/content.html', // COSä¸­çš„è·¯å¾„
  videoKey: null,
  homeworkKey: null,
  duration: '10åˆ†é’Ÿ',
  order: 1,
  isFree: false, // ä»˜è´¹å†…å®¹
}
```

### ç¬¬å››æ­¥ï¼šåœ¨è¯¾ç¨‹è¯¦æƒ…é¡µæ˜¾ç¤º

ä¿®æ”¹ `LessonContent` ç»„ä»¶æ”¯æŒç§æœ‰å†…å®¹ï¼š

```jsx
{lesson.type === 'protected' && (
  <div className="prose prose-lg max-w-none">
    <ProtectedContent 
      courseId={courseId}
      contentKey={lesson.contentKey}
    />
  </div>
)}
```

## ğŸ¯ æœ€ç»ˆæ•ˆæœ

1. **å­¦å‘˜è®¿é—®è¯¾ç¨‹** â†’ éœ€è¦ç™»å½•
2. **ç‚¹å‡»"è¿™å¥—è¯¾ç¨‹æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ"** â†’ æ£€æŸ¥æ˜¯å¦è´­ä¹°
3. **å·²è´­ä¹°** â†’ ä»ç§æœ‰COSåŠ è½½å†…å®¹
4. **æœªè´­ä¹°** â†’ æç¤ºè´­ä¹°è¯¾ç¨‹

## ğŸ’¡ ä¼˜åŠ¿

- âœ… å®Œå…¨æ›¿ä»£WordPressï¼Œè§£å†³å…¬å¼€é“¾æ¥é—®é¢˜
- âœ… æ”¯æŒæ‰€æœ‰å†…å®¹ç±»å‹ï¼ˆå›¾æ–‡ã€è§†é¢‘ã€ä½œä¸šï¼‰
- âœ… ç»Ÿä¸€çš„æƒé™ç®¡ç†
- âœ… å†…å®¹å®Œå…¨ç§æœ‰åŒ–ä¿æŠ¤